---
title: "ThreeME Standard results"
subtitle: "Scenario: `r params$scenario_name`"
author: "ThreeME team"
date: "`r format(Sys.Date(), '%d %B %y')`"
output: slidy_presentation
params:
  startyear: 2020
  endyear: 2050
  scenario_name: carbontax_lux
  classification: c28_s32
  template_default: ofce
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = FALSE,
  message = FALSE,
  warning = FALSE,
  results = "hide"
)
```


```{r Plots default options}


startyear <- params$startyear
endyear <- params$endyear
scenario_name <- params$scenario_name
classification <- params$classification
template_default <- params$template_default

```



```{r Required packages, message=FALSE, warning=FALSE}

# Load functions
source("src/functions.R")

```


```{r load data and bridges}

data_full<-readRDS(file = paste0("databases/",scenario_name,"_",classification,".rds"))
### loading the sector and commodity aggregated database 
data_sector <- readRDS(file = paste0("databases/",scenario_name,"_",classification,"_commodities_sectors.rds"))


source("bridges/bridge_c28_s32.R")
source("bridges/codenames_c28_s32.R")


```



---

# Result summary

```{r Table macro, results ='asis'}

table <- ermeeth::table.output(data = data_sector, scenario = scenario_name, 
             full.table = FALSE, export.doc = FALSE, langue = "en",
             title = 'Macroeconomic main results')

table

# to do: 
# - Unité pas claire unclear: %, unit?
# - manque des indicateurs:  taux de chomage
# - Légend (a) inutile car toute les même: seulement pour les exceptions
# - long term en anglais
# - a 2nd tables with the missing indicators


```





# Macroeconomic results: GDP and its components

```{r Graph GDP,  fig.height = 6, fig.width = 14}
label_macro <- c("Gross domestic product", "Households consumption", "Investment", "Public spending")
A <- simpleplot(data_full,c("GDP", "CH", "I", "G"), label_macro, startyear, endyear, titleplot = "GDP and its components  (in difference from baseline)")

B <- simpleplot(data_full,c("X", "M"),label_series = c("Exports", "Imports"), startyear, endyear, titleplot = "External trade  (in difference from baseline)")


macro <- ggarrange(A,B,
labels = c("(a)", "(b)"),
hjust = -0.5, vjust = 1.5,
ncol = 2, nrow = 1,
widths = 2,  heights = 1)

## Save image on disk for further use (ready to be activated)
# ggsave("macro.svg", device = svg, width = 32,  height = 16, units = c("cm"))


## See the graph in Mark-down
macro


```



# Contribution to growth (in deviation)
```{r contrib Graphs, fig.height = 6, fig.width=12}
GDP_comp <- c( "CH","X","M", "I", "G","DS")
GDP_comp_label <- c( "Households consumption","Exports","Imports", "Investment", "Public spending","Stock variation")

data_plot <-  contrib(data_full,"GDP", GDP_comp, scenar = c("baseline",scenario_name))

contrib.plot(data_plot, series = GDP_comp,label_series = GDP_comp_label,
             startyear = 2020, titleplot = "Contributions to GDP gowth (in difference from baseline)", line_tot = TRUE)


# To do: graphique faux!!!  
```



---


